<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    

    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="Book something fun"></h:outputText>
        </ui:define>
        <ui:define name="body">
            <h:panelGroup id="messagePanel" layout="block">
                <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
            </h:panelGroup>
            <h:form>
            <select value="room" colMd="2" required="false" labelColMd="2">
                    <option value="room">Grupprum 1</option>
                    <option value="room">Grupprum 2</option>
                    <option value="room">Grupprum 3</option>
                    <option value="room">Motionshall</option>
                    <option value="room">Musikrum</option>
            </select>
            <h:commandLink action="#{timeslotController.getSelected}" value="#{bundle.SearchByRoom}"/>
            </h:form>
            <div>
              
                <table class="fixed_header">
                    <thead>
                        <tr>
                            <th></th>
                            <th id="date1"></th>
                            <th id="date2"></th>
                            <th id="date3"></th>
                            <th id="date4"></th>
                            <th id="date5"></th>
                            <th id="date6"></th>
                            <th id="date7"></th>
                        </tr>
                    </thead>
                </table>
                <table id="schema" class ="table">
                    <tbody>
                        <tr>
                            <script type="text/javascript">
                                //<![CDATA[ 
                                
                                
                                function createTable(){
                                var tbl = document.createElement("table");
                                var k = 0;
                                var tcol = document.createElement("td");
                                var tbody = document.createElement("tbody");
                                n = new Date();
                                y = n.getFullYear();
                                m = n.getMonth() + 1;
                                d = n.getDate();
                                weekDay = n.getDay();
                                
                                for(var i = 0; i<24;i++){
                                    var trow = document.createElement("tr");
                                        for(var j = 1; j<8;j++){
            //text = document.createTextNode("Button");
                                        tcol = document.createElement("td");
                                        var btn = document.createElement('input');
                                        btn.type = "button";
                                        btn.className = "btn";
                                        btn.value = i + "-" + (i+1);
                                        btn.id = (i*7 + j).toString() +" "+ ((n.getDate()-weekDay)+j) +" "+  (n.getMonth()+1) +" "+  n.getFullYear();                                        
                                        btn.onclick = function changeText(){
                                                        document.getElementById(this.id).value = "DONE";
                                                        document.getElementById(this.id).disabled = true;
                                                        alert(this.id);
                                                        };
                                        tcol.appendChild(btn);
                                        trow.appendChild(tcol);
                                        k++;
                                    }
                                tbody.appendChild(trow);
                                }
                            tbl.appendChild(tbody);
                            return tbl;
                                }
                            var parent = document.getElementById("schema");
                            parent.appendChild(createTable());
    
                            

                                //]]>
                                                      
                            </script>
                        </tr>
                    </tbody>
                </table>
                <script type="text/javascript">
                    var ids = ["date1", "date2", "date3","date4","date5","date6","date7"];                    
                    function date() {
                        n = new Date();
                        y = n.getFullYear();
                        m = n.getMonth() + 1;
                        d = n.getDate();
                        weekDay = n.getDay();
                        
                        displayDate(d-weekDay+1,m,y);
                    }       
                    function displayDate(d,m,y){
                        for (id in ids)
                        {
                            var dInt = Number(d);
                            console.log(d);
                            console.log(dInt);
                            var idInt = Number(id);
                            var day =  dInt + idInt;
                            console.log(dInt);
                            document.getElementById(ids[id]).innerHTML = day + "/" + m + "/" + y;
                        }
                    }
                    window.onload = date();

                </script>
            </div>
        </ui:define>
    </ui:composition>


</html>
