<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html template="../template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui">
    
    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="Mina Bokningar"> </h:outputText>
        </ui:define>
        <ui:define name="body">
            <ui:param name="user" value="#{user}" />
            
            <b:row>
            <b:form id="bookedForm">
            <b:dataTable
                    id="bookedTable"
                    widgetVar="me"
                    var="b" value="#{timeslotController.items}" span="6"
                    striped="true" 
                    page-length-menu="5,10,15"
                    page-length="5"
                    onpage="console.log(me); ajax:book.page()"
                    searching="false"                   
                  
            >
                <b:dataTableColumn value="#{b.timeslotPK.date}" order="asc"/>
                <b:dataTableColumn value="#{b.timeslotPK.time}"/>
                <b:dataTableColumn value="#{b.timeslotPK.room}"/>
                <b:dataTableColumn value="#{b.description}"/>
                <b:dataTableColumn value="#{b.users}"/>

                <b:dataTableColumn label="Edit" orderable="false">
                        <h:commandLink onclick="$('.formValidationModalClass').modal('show')" value="Edit"
                                       actionListener="#{timeslotController.prepareEdit2}"
                                       />
                </b:dataTableColumn>
                
                
                  
                <b:dataTableColumn label="Delete" orderable="false">
                    <h:commandLink actionListener="#{timeslotController.destroy()}" value="#{bundle.ListTimeslotDestroyLink}"
                                     action="/timeslot/MyBookings"/>
                </b:dataTableColumn>

            </b:dataTable>
            </b:form>
        </b:row>
            
            <h:body>
                <h:button outcome="/timeslot/Schema2" value="Boka" styleClass="b" />
            </h:body>
            
            
            
            <b:modal title="Mina Bokningar" styleClass="formValidationModalClass"
                 closable="false"
                 closeOnEscape="true">
            <b:form>
                <b:row >
                <b:column span="12">
                    <h2>Edit</h2>
                </b:column>
            </b:row>
            <b:row>
                <b:column span="2">
                    <h:outputLabel value="Date" />
                </b:column>
                <b:inputText value="#{timeslotController.selected.timeslotPK.date}" size="15" span="2" 
                             />
            </b:row>
            <b:row>
                <b:column span="2" >
                    <h:outputLabel value="Time" />
                </b:column>
                <b:inputText value="#{timeslotController.selected.timeslotPK.time}" size="15" span="2" 
                             />
            </b:row>
            <b:row>
                <b:column span="2">
                    <h:outputLabel value="Room" />
                </b:column>
                <b:inputText value="#{timeslotController.selected.timeslotPK.room}" size="15" span="2" 
                             />
            </b:row>
                <b:row>
                <b:commandButton value="Done"  look="primary" span="2"
                                 actionListener="#{timeslotController.update}" action="/timeslot/MyBookings"/>
                <b:commandButton value="Cancel"  look="info" span="2"
                                 action="/timeslot/MyBookings" immediate="true"/>
            </b:row>
            
            </b:form>
            </b:modal>
            
    
        </ui:define>

    </ui:composition>
</html>
